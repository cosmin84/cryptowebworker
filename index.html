<!DOCTYPE html>
<html>
<head>
	<title>Crypto Web Worker</title>	
</head>
<body>
	<div id="output"></div>
	<script>
		// Number of to be generated
		var stringsCount = 200;

		// The div for the output
		var outputDiv = document.getElementById('output');

		// Check if Web Workers are supported by the browser
		if (window.Worker) {
			// Create a new worker
			var worker = new Worker('worker.js');

			
			for (i = 0; i < stringsCount; i++) {
				// Create a random string
				var randomString = Math.random().toString(36).substring(2);

				// Concatenate string with itself
				for (c = 0; c < 10; c++) {
					randomString += randomString.concat(randomString);
				}

				// Send string to worker
				worker.postMessage(randomString);
			}
			
			// Get response from worker
			worker.onmessage = function(e) {				
				// Display encrypted strings
				var paragraph = document.createElement('p');
				var content = document.createTextNode(e.data);
				paragraph.appendChild(content);
				outputDiv.appendChild(paragraph);
			}
		}		
	</script>
</body>
</html>